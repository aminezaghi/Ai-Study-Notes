# StudyMate Frontend

**StudyMate** is a modern, AI-powered study platform that transforms your PDF documents into interactive study materials, including notes, flashcards, and quizzes. This is the frontend (Next.js/React) application.

---

## Features

- **User Authentication:** Register, login, and logout with JWT-based authentication and **email verification**.
- **Email Verification:** Complete email verification flow with verification codes and resend functionality.
- **Dashboard:** Personalized dashboard with animated stats, quick actions, and recent documents.
- **Document Upload:** Upload PDF files and trigger AI-powered generation of study notes, enhanced notes, and flashcards (with multi-step animated progress).
- **Document Management:** View, search, filter, and delete documents. Each document has a detail page with tabs for enhanced notes, flashcards, and quizzes.
- **Study Materials:** Interactive flashcards, quizzes, and enhanced notes, all generated by AI.
- **Responsive UI:** Fully responsive, beautiful design with glassmorphism, gradients, and smooth animations.
- **Dark Mode:** Toggle between light and dark themes.
- **Robust Animations:** GSAP and Framer Motion for smooth, reliable UI transitions.
- **Accessibility:** Uses Radix UI primitives for accessible dialogs, menus, and more.
- **Notifications:** Toast notifications for all major actions (success, error, etc.).
- **State Management:** Uses React Query for data fetching and caching, with cache cleared on logout for security.
- **Hydration-Safe Animations:** All random/animated elements are generated in a hydration-safe way to avoid React hydration errors.

---

## Tech Stack

- **Framework:** Next.js 15 (App Router, SSR/CSR)
- **Language:** TypeScript, React 19
- **Styling:** Tailwind CSS, custom animations, glassmorphism
- **UI Components:** Radix UI, shadcn/ui, Lucide icons
- **State/Data:** React Query for data fetching and caching, Zustand (optional), Axios
- **Animation:** GSAP, Framer Motion
- **Forms:** React Hook Form
- **Other:** Sonner (toasts), date-fns, Embla Carousel, etc.

---

## Getting Started

### 1. Install dependencies

```bash
pnpm install
# or
npm install
# or
yarn install
```

### 2. Environment Variables

Create a `.env.local` file and set:

```
NEXT_PUBLIC_API_BASE_URL=http://localhost:8000/api
```

Adjust the URL to match your backend.

### 3. Run the development server

```bash
pnpm dev
# or
npm run dev
# or
yarn dev
```

Visit [http://localhost:3000](http://localhost:3000) in your browser.

---

## Project Structure

- `app/` — Next.js app directory (pages, layouts, routes)
  - `register/` — User registration page
  - `login/` — User login page
  - `verify-email/` — Email verification page
  - `dashboard/` — Main dashboard and document management
- `components/` — UI and feature components (sidebar, dialogs, tabs, etc.)
- `hooks/` — Custom React hooks (data fetching, state, etc.)
- `lib/` — API client (Axios), utility functions, stores
- `styles/` — Global and Tailwind CSS
- `public/` — Static assets (images, icons)
- `types/` — TypeScript types

---

## Key Implementation Details

### Authentication & Email Verification

- **Registration Flow:** Users register and are redirected to `/verify-email` with a verification code sent to their email.
- **Email Verification:** Users must verify their email before they can log in. Verification codes can be resent if needed.
- **Login Flow:** If login fails due to unverified email, users are redirected to the verification page with their user ID.
- **JWT token** is stored in `localStorage` and as a cookie.
- On logout, token and user state are cleared, and React Query cache is reset to prevent data leaks between users.

### Email Verification Implementation

- **Registration:** After successful registration, user ID is stored in localStorage and user is redirected to `/verify-email`.
- **Verification Page:** Users can enter verification codes and resend codes if needed.
- **Login Redirect:** If login fails due to unverified email, user ID is extracted from error response and user is redirected to verification page.
- **API Endpoints:** Uses `/verify-email` and `/resend-verification-code` endpoints.
- **State Management:** User ID is passed via URL parameters and stored in localStorage for verification.

### Data Fetching

- Uses React Query for all API data (documents, user, etc.).
- Cache is invalidated on mutations and cleared on logout.

### Animations

- GSAP and Framer Motion for all major UI transitions.
- Animations only run when DOM elements are present (defensive checks).
- Hydration-safe: random values for particles and similar effects are generated with `useMemo` to avoid SSR/CSR mismatches.

### Upload Flow

- Uploads PDF files (no title/description required).
- Triggers 3 parallel POST requests for study notes, enhanced notes, and flashcards (with `num_cards: 25`).
- Shows a modal dialog with animated progress for each step.

### Document Management

- List, search, filter, and delete documents.
- Each document has a detail page with tabs for enhanced notes, flashcards, and quizzes.
- Deleting a document opens a confirmation dialog and removes it from the list.

### Error Handling

- All API errors are caught and shown as toast notifications.
- Email verification errors are handled gracefully with user-friendly messages.
- CORS errors must be handled on the backend.

### Accessibility

- Uses Radix UI for accessible dialogs, menus, and more.
- Dialogs include descriptions for screen readers.

---

## Development Notes

- **Hydration Errors:** Avoid using `Math.random()` or `Date.now()` directly in render. Use `useMemo` for random values.
- **GSAP Animations:** Always check for element existence before animating. Use `useLayoutEffect` for DOM-dependent animations.
- **React Query:** Always clear cache on logout to prevent data leaks between users.
- **Email Verification:** User ID is passed via URL parameters and localStorage to ensure verification works across page refreshes.
- **CORS:** Ensure your backend allows requests from your frontend origin.

---

## API Endpoints

### Authentication
- `POST /api/register` - Register new user (returns user_id)
- `POST /api/login` - Login user (requires email verification)
- `POST /api/logout` - Logout user
- `GET /api/user` - Get current user profile

### Email Verification
- `POST /api/verify-email` - Verify email with code
- `POST /api/resend-verification-code` - Resend verification code

### Documents
- `POST /api/documents` - Upload document
- `GET /api/documents` - Get user documents
- `DELETE /api/documents/{id}` - Delete document
- `POST /api/documents/{id}/notes/generate` - Generate study notes
- `POST /api/documents/{id}/enhanced-notes/generate` - Generate enhanced notes
- `POST /api/documents/{id}/flashcards/generate` - Generate flashcards

---

## Scripts

- `dev` — Start development server
- `build` — Build for production
- `start` — Start production server
- `lint` — Lint code

---

## License

This project is for educational purposes. Please contact the author for production/commercial use.

---

If you need more details (API endpoints, backend requirements, or deployment instructions), let me know! 